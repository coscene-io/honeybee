name: test cli

on:
  workflow_dispatch:
    inputs:
      version:
        type: string
        description: "Version to publish (e.g., v1.0.0)"
        required: true
      environment:
        type: choice
        description: "publish studio to"
        required: true
        default: "saas"
        options:
          - dev
          - saas

jobs:
  set_cos_config_file:
    environment: ${{ github.event.inputs.environment }}
    runs-on: macos-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4
        with:
          lfs: true
          fetch-depth: 0

      - name: Set cos config file
        id: set_cos_config_file
        run: |
          echo "pwd: $(pwd)"
          echo "ls: $(ls)"
          echo "${{ vars.APP_CONFIG }}" > packages/studio-desktop/src/public/cos-config.js
          echo "$(cat packages/studio-desktop/src/public/cos-config.js)"
