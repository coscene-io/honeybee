apiVersion: skaffold/v2beta28
kind: Config
build:
  tagPolicy:
    # e.g: 2022-12-05_v22.48.0-8-g295c572a
    # e.g: 2022-12-05-78c7d2b
    customTemplate:
      template: "{{.FOO}}-{{.BAR}}"
      components:
        - name: FOO
          dateTime:
            format: "2006-01-02"
            timezone: "UTC"
        - name: BAR
          gitCommit:
            ignoreChanges: true
profiles:
  - name: azure-dev-east-us
    build:
      artifacts:
        - image: coseus.azurecr.io/honeybee
          context: .
          docker:
            dockerfile: Dockerfile
            buildArgs:
              BUF_TOKEN: "{{.BUF_TOKEN}}"
              GH_PACKAGES_ORG_TOKEN: "{{.GH_PACKAGES_ORG_TOKEN}}"
              PROJECT_ENV: "azureDev"
              VITE_APP_BASE_API_URL: "https://api.coscene.dev"
              ROLLBAR_ACCESS_TOKEN: "{{.ROLLBAR_ACCESS_TOKEN}}"
  - name: aliyun-staging-cn-hangzhou
    build:
      artifacts:
        - image: coseus.azurecr.io/honeybee
          context: .
          docker:
            dockerfile: Dockerfile
            buildArgs:
              BUF_TOKEN: "{{.BUF_TOKEN}}"
              GH_PACKAGES_ORG_TOKEN: "{{.GH_PACKAGES_ORG_TOKEN}}"
              PROJECT_ENV: "production"
              VITE_APP_BASE_API_URL: "https://api.coscene.cn"
              ROLLBAR_ACCESS_TOKEN: "{{.ROLLBAR_ACCESS_TOKEN}}"
  - name: aliyun-keenon-cn-hangzhou
    build:
      artifacts:
        - image: coseus.azurecr.io/honeybee
          context: .
          docker:
            dockerfile: Dockerfile
            buildArgs:
              BUF_TOKEN: "{{.BUF_TOKEN}}"
              GH_PACKAGES_ORG_TOKEN: "{{.GH_PACKAGES_ORG_TOKEN}}"
              PROJECT_ENV: "keenon"
              VITE_APP_BASE_API_URL: "https://api.keenon.coscene.cn"
              ROLLBAR_ACCESS_TOKEN: "{{.ROLLBAR_ACCESS_TOKEN}}"
  - name: aliyun-gaussian-cn-hangzhou
    build:
      artifacts:
        - image: coseus.azurecr.io/honeybee
          context: .
          docker:
            dockerfile: Dockerfile
            buildArgs:
              BUF_TOKEN: "{{.BUF_TOKEN}}"
              GH_PACKAGES_ORG_TOKEN: "{{.GH_PACKAGES_ORG_TOKEN}}"
              PROJECT_ENV: "gaussian"
              VITE_APP_BASE_API_URL: "https://api.gaussian.coscene.cn"
              ROLLBAR_ACCESS_TOKEN: "{{.ROLLBAR_ACCESS_TOKEN}}"
